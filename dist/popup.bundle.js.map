{
  "version": 3,
  "sources": ["../src/popup.ts"],
  "sourcesContent": ["// Interfaces\r\ninterface Orcamento {\r\n  descricao: string;\r\n  valor: string;\r\n  data: string;\r\n}\r\n\r\ninterface OrcamentosStorage {\r\n  [telefone: string]: Orcamento[];\r\n}\r\n\r\ninterface ExtracaoResponse {\r\n  success: boolean;\r\n  telefone?: string;\r\n  error?: string;\r\n}\r\n\r\n// Elementos do DOM\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  console.log('[WhatsApp Or\u00E7amentos] Popup carregado');\r\n\r\n  const loadingElement = document.getElementById('loading');\r\n  const erroElement = document.getElementById('erro');\r\n  const resultadoElement = document.getElementById('resultado');\r\n  const telefoneElement = document.getElementById('telefone');\r\n  const semOrcamentosElement = document.getElementById('sem-orcamentos');\r\n  const listaOrcamentosElement = document.getElementById('lista-orcamentos');\r\n  const descricaoOrcamentoElement = document.getElementById('descricao-orcamento') as HTMLInputElement;\r\n  const valorOrcamentoElement = document.getElementById('valor-orcamento') as HTMLInputElement;\r\n  const salvarOrcamentoButton = document.getElementById('salvar-orcamento');\r\n  const erroMensagemElement = document.getElementById('erro-mensagem');\r\n  const atualizarBotao = document.getElementById('atualizar-botao');\r\n\r\n  if (!loadingElement || !erroElement || !resultadoElement || !telefoneElement || \r\n      !semOrcamentosElement || !listaOrcamentosElement || !descricaoOrcamentoElement || \r\n      !valorOrcamentoElement || !erroMensagemElement) {\r\n    console.error('[WhatsApp Or\u00E7amentos] Elementos do DOM n\u00E3o encontrados');\r\n    return;\r\n  }\r\n\r\n  // Vari\u00E1vel para armazenar o telefone atual\r\n  let telefoneAtual = '';\r\n\r\n  // Fun\u00E7\u00E3o para mostrar o erro\r\n  function mostrarErro(mensagem: string): void {\r\n    console.error('[WhatsApp Or\u00E7amentos] Erro:', mensagem);\r\n    \r\n    loadingElement.style.display = 'none';\r\n    erroElement.style.display = 'block';\r\n    resultadoElement.style.display = 'none';\r\n    \r\n    if (erroMensagemElement) {\r\n      erroMensagemElement.textContent = mensagem || 'N\u00E3o foi poss\u00EDvel extrair o n\u00FAmero de telefone.';\r\n    }\r\n  }\r\n\r\n  // Fun\u00E7\u00E3o para mostrar o resultado\r\n  function mostrarResultado(telefone: string): void {\r\n    console.log('[WhatsApp Or\u00E7amentos] Mostrando resultado para telefone:', telefone);\r\n    \r\n    loadingElement.style.display = 'none';\r\n    erroElement.style.display = 'none';\r\n    resultadoElement.style.display = 'block';\r\n    \r\n    telefoneAtual = telefone;\r\n    telefoneElement.textContent = telefone;\r\n    \r\n    // Carregar or\u00E7amentos existentes\r\n    carregarOrcamentos(telefone);\r\n  }\r\n\r\n  // Fun\u00E7\u00E3o para extrair o telefone\r\n  function extrairTelefone(): void {\r\n    console.log('[WhatsApp Or\u00E7amentos] Iniciando extra\u00E7\u00E3o de telefone...');\r\n    \r\n    // Mostrar estado de carregamento\r\n    loadingElement.style.display = 'block';\r\n    erroElement.style.display = 'none';\r\n    resultadoElement.style.display = 'none';\r\n    \r\n    // Verificar se estamos na p\u00E1gina do WhatsApp Web\r\n    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const currentTab = tabs[0];\r\n      console.log('[WhatsApp Or\u00E7amentos] Tab atual:', currentTab);\r\n      \r\n      if (!currentTab.url || !currentTab.url.includes('web.whatsapp.com')) {\r\n        mostrarErro('Esta extens\u00E3o s\u00F3 funciona no WhatsApp Web. Por favor, abra https://web.whatsapp.com');\r\n        return;\r\n      }\r\n      \r\n      console.log('[WhatsApp Or\u00E7amentos] Enviando mensagem para a tab:', currentTab.id);\r\n      \r\n      // Enviar mensagem para o content script\r\n      chrome.tabs.sendMessage(\r\n        currentTab.id!,\r\n        {action: 'extrairTelefone'},\r\n        function(response: ExtracaoResponse) {\r\n          console.log('[WhatsApp Or\u00E7amentos] Resposta recebida:', response);\r\n          \r\n          // Verificar se tivemos uma resposta v\u00E1lida\r\n          if (chrome.runtime.lastError) {\r\n            console.error('[WhatsApp Or\u00E7amentos] Erro ao comunicar com a p\u00E1gina:', chrome.runtime.lastError.message);\r\n            mostrarErro('Erro ao comunicar com a p\u00E1gina: ' + chrome.runtime.lastError.message);\r\n            return;\r\n          }\r\n          \r\n          if (!response) {\r\n            mostrarErro('N\u00E3o foi poss\u00EDvel conectar ao WhatsApp Web. Tente recarregar a p\u00E1gina.');\r\n            return;\r\n          }\r\n          \r\n          // Verificar se a extra\u00E7\u00E3o foi bem-sucedida\r\n          if (response.success && response.telefone) {\r\n            mostrarResultado(response.telefone);\r\n          } else {\r\n            let mensagemErro = 'N\u00E3o foi poss\u00EDvel extrair o telefone.';\r\n            \r\n            if (response.error) {\r\n              mensagemErro += ' Motivo: ' + response.error;\r\n            }\r\n            \r\n            mostrarErro(mensagemErro);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // Fun\u00E7\u00E3o para carregar or\u00E7amentos existentes\r\n  function carregarOrcamentos(telefone: string): void {\r\n    console.log('[WhatsApp Or\u00E7amentos] Carregando or\u00E7amentos para:', telefone);\r\n    \r\n    // Carregar or\u00E7amentos do armazenamento local\r\n    chrome.storage.local.get(['orcamentos'], function(result: { orcamentos?: OrcamentosStorage }) {\r\n      const orcamentos = result.orcamentos || {};\r\n      const orcamentosContato = orcamentos[telefone] || [];\r\n      \r\n      if (orcamentosContato.length === 0) {\r\n        semOrcamentosElement!.style.display = 'block';\r\n        listaOrcamentosElement!.style.display = 'none';\r\n      } else {\r\n        semOrcamentosElement!.style.display = 'none';\r\n        listaOrcamentosElement!.style.display = 'block';\r\n        \r\n        // Limpar lista atual\r\n        listaOrcamentosElement!.innerHTML = '';\r\n        \r\n        // Adicionar cada or\u00E7amento \u00E0 lista\r\n        orcamentosContato.forEach(function(orcamento) {\r\n          const li = document.createElement('li');\r\n          li.innerHTML = `\r\n            <strong>${orcamento.descricao}</strong>\r\n            <span>R$ ${orcamento.valor}</span>\r\n            <span class=\"data\">${new Date(orcamento.data).toLocaleDateString()}</span>\r\n          `;\r\n          listaOrcamentosElement!.appendChild(li);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Fun\u00E7\u00E3o para salvar um novo or\u00E7amento\r\n  function salvarOrcamento(): void {\r\n    console.log('[WhatsApp Or\u00E7amentos] Salvando novo or\u00E7amento...');\r\n    \r\n    const descricao = descricaoOrcamentoElement.value.trim();\r\n    const valor = valorOrcamentoElement.value.trim();\r\n    \r\n    if (!descricao || !valor) {\r\n      alert('Por favor, preencha a descri\u00E7\u00E3o e o valor do or\u00E7amento.');\r\n      return;\r\n    }\r\n    \r\n    if (!telefoneAtual) {\r\n      alert('N\u00E3o h\u00E1 um telefone selecionado.');\r\n      return;\r\n    }\r\n    \r\n    // Buscar or\u00E7amentos existentes\r\n    chrome.storage.local.get(['orcamentos'], function(result: { orcamentos?: OrcamentosStorage }) {\r\n      const orcamentos = result.orcamentos || {};\r\n      const orcamentosContato = orcamentos[telefoneAtual] || [];\r\n      \r\n      // Adicionar novo or\u00E7amento\r\n      orcamentosContato.push({\r\n        descricao: descricao,\r\n        valor: valor,\r\n        data: new Date().toISOString()\r\n      });\r\n      \r\n      // Atualizar or\u00E7amentos\r\n      orcamentos[telefoneAtual] = orcamentosContato;\r\n      \r\n      // Salvar no armazenamento\r\n      chrome.storage.local.set({orcamentos: orcamentos}, function() {\r\n        console.log('[WhatsApp Or\u00E7amentos] Or\u00E7amento salvo com sucesso');\r\n        \r\n        // Limpar campos\r\n        descricaoOrcamentoElement.value = '';\r\n        valorOrcamentoElement.value = '';\r\n        \r\n        // Recarregar or\u00E7amentos\r\n        carregarOrcamentos(telefoneAtual);\r\n      });\r\n    });\r\n  }\r\n  \r\n  // Event listener para o bot\u00E3o de salvar or\u00E7amento\r\n  if (salvarOrcamentoButton) {\r\n    salvarOrcamentoButton.addEventListener('click', salvarOrcamento);\r\n  }\r\n  \r\n  // Event listener para o bot\u00E3o de atualizar\r\n  if (atualizarBotao) {\r\n    atualizarBotao.addEventListener('click', extrairTelefone);\r\n  }\r\n\r\n  // Iniciar a extra\u00E7\u00E3o de telefone quando o popup for aberto\r\n  console.log('[WhatsApp Or\u00E7amentos] Iniciando extra\u00E7\u00E3o autom\u00E1tica...');\r\n  extrairTelefone();\r\n}); "],
  "mappings": "mBAkBA,SAAS,iBAAiB,mBAAoB,UAAW,CACvD,QAAQ,IAAI,0CAAuC,EAEnD,IAAMA,EAAiB,SAAS,eAAe,SAAS,EAClDC,EAAc,SAAS,eAAe,MAAM,EAC5CC,EAAmB,SAAS,eAAe,WAAW,EACtDC,EAAkB,SAAS,eAAe,UAAU,EACpDC,EAAuB,SAAS,eAAe,gBAAgB,EAC/DC,EAAyB,SAAS,eAAe,kBAAkB,EACnEC,EAA4B,SAAS,eAAe,qBAAqB,EACzEC,EAAwB,SAAS,eAAe,iBAAiB,EACjEC,EAAwB,SAAS,eAAe,kBAAkB,EAClEC,EAAsB,SAAS,eAAe,eAAe,EAC7DC,EAAiB,SAAS,eAAe,iBAAiB,EAEhE,GAAI,CAACV,GAAkB,CAACC,GAAe,CAACC,GAAoB,CAACC,GACzD,CAACC,GAAwB,CAACC,GAA0B,CAACC,GACrD,CAACC,GAAyB,CAACE,EAAqB,CAClD,QAAQ,MAAM,8DAAwD,EACtE,MACF,CAGA,IAAIE,EAAgB,GAGpB,SAASC,EAAYC,EAAwB,CAC3C,QAAQ,MAAM,iCAA+BA,CAAQ,EAErDb,EAAe,MAAM,QAAU,OAC/BC,EAAY,MAAM,QAAU,QAC5BC,EAAiB,MAAM,QAAU,OAE7BO,IACFA,EAAoB,YAAcI,GAAY,0DAElD,CAGA,SAASC,EAAiBC,EAAwB,CAChD,QAAQ,IAAI,8DAA4DA,CAAQ,EAEhFf,EAAe,MAAM,QAAU,OAC/BC,EAAY,MAAM,QAAU,OAC5BC,EAAiB,MAAM,QAAU,QAEjCS,EAAgBI,EAChBZ,EAAgB,YAAcY,EAG9BC,EAAmBD,CAAQ,CAC7B,CAGA,SAASE,GAAwB,CAC/B,QAAQ,IAAI,kEAAyD,EAGrEjB,EAAe,MAAM,QAAU,QAC/BC,EAAY,MAAM,QAAU,OAC5BC,EAAiB,MAAM,QAAU,OAGjC,OAAO,KAAK,MAAM,CAAC,OAAQ,GAAM,cAAe,EAAI,EAAG,SAASgB,EAAM,CACpE,IAAMC,EAAaD,EAAK,CAAC,EAGzB,GAFA,QAAQ,IAAI,sCAAoCC,CAAU,EAEtD,CAACA,EAAW,KAAO,CAACA,EAAW,IAAI,SAAS,kBAAkB,EAAG,CACnEP,EAAY,2FAAqF,EACjG,MACF,CAEA,QAAQ,IAAI,yDAAuDO,EAAW,EAAE,EAGhF,OAAO,KAAK,YACVA,EAAW,GACX,CAAC,OAAQ,iBAAiB,EAC1B,SAASC,EAA4B,CAInC,GAHA,QAAQ,IAAI,8CAA4CA,CAAQ,EAG5D,OAAO,QAAQ,UAAW,CAC5B,QAAQ,MAAM,8DAAyD,OAAO,QAAQ,UAAU,OAAO,EACvGR,EAAY,sCAAqC,OAAO,QAAQ,UAAU,OAAO,EACjF,MACF,CAEA,GAAI,CAACQ,EAAU,CACbR,EAAY,gFAAuE,EACnF,MACF,CAGA,GAAIQ,EAAS,SAAWA,EAAS,SAC/BN,EAAiBM,EAAS,QAAQ,MAC7B,CACL,IAAIC,EAAe,6CAEfD,EAAS,QACXC,GAAgB,YAAcD,EAAS,OAGzCR,EAAYS,CAAY,CAC1B,CACF,CACF,CACF,CAAC,CACH,CAGA,SAASL,EAAmBD,EAAwB,CAClD,QAAQ,IAAI,0DAAqDA,CAAQ,EAGzE,OAAO,QAAQ,MAAM,IAAI,CAAC,YAAY,EAAG,SAASO,EAA4C,CAE5F,IAAMC,GADaD,EAAO,YAAc,CAAC,GACJP,CAAQ,GAAK,CAAC,EAE/CQ,EAAkB,SAAW,GAC/BnB,EAAsB,MAAM,QAAU,QACtCC,EAAwB,MAAM,QAAU,SAExCD,EAAsB,MAAM,QAAU,OACtCC,EAAwB,MAAM,QAAU,QAGxCA,EAAwB,UAAY,GAGpCkB,EAAkB,QAAQ,SAASC,EAAW,CAC5C,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY;AAAA,sBACHD,EAAU,SAAS;AAAA,uBAClBA,EAAU,KAAK;AAAA,iCACL,IAAI,KAAKA,EAAU,IAAI,EAAE,mBAAmB,CAAC;AAAA,YAEpEnB,EAAwB,YAAYoB,CAAE,CACxC,CAAC,EAEL,CAAC,CACH,CAGA,SAASC,GAAwB,CAC/B,QAAQ,IAAI,wDAAkD,EAE9D,IAAMC,EAAYrB,EAA0B,MAAM,KAAK,EACjDsB,EAAQrB,EAAsB,MAAM,KAAK,EAE/C,GAAI,CAACoB,GAAa,CAACC,EAAO,CACxB,MAAM,kEAAyD,EAC/D,MACF,CAEA,GAAI,CAACjB,EAAe,CAClB,MAAM,uCAAiC,EACvC,MACF,CAGA,OAAO,QAAQ,MAAM,IAAI,CAAC,YAAY,EAAG,SAASW,EAA4C,CAC5F,IAAMO,EAAaP,EAAO,YAAc,CAAC,EACnCC,EAAoBM,EAAWlB,CAAa,GAAK,CAAC,EAGxDY,EAAkB,KAAK,CACrB,UAAWI,EACX,MAAOC,EACP,KAAM,IAAI,KAAK,EAAE,YAAY,CAC/B,CAAC,EAGDC,EAAWlB,CAAa,EAAIY,EAG5B,OAAO,QAAQ,MAAM,IAAI,CAAC,WAAYM,CAAU,EAAG,UAAW,CAC5D,QAAQ,IAAI,yDAAmD,EAG/DvB,EAA0B,MAAQ,GAClCC,EAAsB,MAAQ,GAG9BS,EAAmBL,CAAa,CAClC,CAAC,CACH,CAAC,CACH,CAGIH,GACFA,EAAsB,iBAAiB,QAASkB,CAAe,EAI7DhB,GACFA,EAAe,iBAAiB,QAASO,CAAe,EAI1D,QAAQ,IAAI,oEAAwD,EACpEA,EAAgB,CAClB,CAAC",
  "names": ["loadingElement", "erroElement", "resultadoElement", "telefoneElement", "semOrcamentosElement", "listaOrcamentosElement", "descricaoOrcamentoElement", "valorOrcamentoElement", "salvarOrcamentoButton", "erroMensagemElement", "atualizarBotao", "telefoneAtual", "mostrarErro", "mensagem", "mostrarResultado", "telefone", "carregarOrcamentos", "extrairTelefone", "tabs", "currentTab", "response", "mensagemErro", "result", "orcamentosContato", "orcamento", "li", "salvarOrcamento", "descricao", "valor", "orcamentos"]
}
