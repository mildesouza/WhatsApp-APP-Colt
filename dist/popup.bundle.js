"use strict";(()=>{document.addEventListener("DOMContentLoaded",function(){console.log("[WhatsApp Or\xE7amentos] Popup carregado");let c=document.getElementById("loading"),l=document.getElementById("erro"),m=document.getElementById("resultado"),f=document.getElementById("telefone"),d=document.getElementById("sem-orcamentos"),r=document.getElementById("lista-orcamentos"),u=document.getElementById("descricao-orcamento"),p=document.getElementById("valor-orcamento"),E=document.getElementById("salvar-orcamento"),g=document.getElementById("erro-mensagem"),y=document.getElementById("atualizar-botao");if(!c||!l||!m||!f||!d||!r||!u||!p||!g){console.error("[WhatsApp Or\xE7amentos] Elementos do DOM n\xE3o encontrados");return}let s="";function i(e){console.error("[WhatsApp Or\xE7amentos] Erro:",e),c.style.display="none",l.style.display="block",m.style.display="none",g&&(g.textContent=e||"N\xE3o foi poss\xEDvel extrair o n\xFAmero de telefone.")}function b(e){console.log("[WhatsApp Or\xE7amentos] Mostrando resultado para telefone:",e),c.style.display="none",l.style.display="none",m.style.display="block",s=e,f.textContent=e,h(e)}function v(){console.log("[WhatsApp Or\xE7amentos] Iniciando extra\xE7\xE3o de telefone..."),c.style.display="block",l.style.display="none",m.style.display="none",chrome.tabs.query({active:!0,currentWindow:!0},function(e){let o=e[0];if(console.log("[WhatsApp Or\xE7amentos] Tab atual:",o),!o.url||!o.url.includes("web.whatsapp.com")){i("Esta extens\xE3o s\xF3 funciona no WhatsApp Web. Por favor, abra https://web.whatsapp.com");return}console.log("[WhatsApp Or\xE7amentos] Enviando mensagem para a tab:",o.id),chrome.tabs.sendMessage(o.id,{action:"extrairTelefone"},function(t){if(console.log("[WhatsApp Or\xE7amentos] Resposta recebida:",t),chrome.runtime.lastError){console.error("[WhatsApp Or\xE7amentos] Erro ao comunicar com a p\xE1gina:",chrome.runtime.lastError.message),i("Erro ao comunicar com a p\xE1gina: "+chrome.runtime.lastError.message);return}if(!t){i("N\xE3o foi poss\xEDvel conectar ao WhatsApp Web. Tente recarregar a p\xE1gina.");return}if(t.success&&t.telefone)b(t.telefone);else{let n="N\xE3o foi poss\xEDvel extrair o telefone.";t.error&&(n+=" Motivo: "+t.error),i(n)}})})}function h(e){console.log("[WhatsApp Or\xE7amentos] Carregando or\xE7amentos para:",e),chrome.storage.local.get(["orcamentos"],function(o){let n=(o.orcamentos||{})[e]||[];n.length===0?(d.style.display="block",r.style.display="none"):(d.style.display="none",r.style.display="block",r.innerHTML="",n.forEach(function(a){let O=document.createElement("li");O.innerHTML=`
            <strong>${a.descricao}</strong>
            <span>R$ ${a.valor}</span>
            <span class="data">${new Date(a.data).toLocaleDateString()}</span>
          `,r.appendChild(O)}))})}function W(){console.log("[WhatsApp Or\xE7amentos] Salvando novo or\xE7amento...");let e=u.value.trim(),o=p.value.trim();if(!e||!o){alert("Por favor, preencha a descri\xE7\xE3o e o valor do or\xE7amento.");return}if(!s){alert("N\xE3o h\xE1 um telefone selecionado.");return}chrome.storage.local.get(["orcamentos"],function(t){let n=t.orcamentos||{},a=n[s]||[];a.push({descricao:e,valor:o,data:new Date().toISOString()}),n[s]=a,chrome.storage.local.set({orcamentos:n},function(){console.log("[WhatsApp Or\xE7amentos] Or\xE7amento salvo com sucesso"),u.value="",p.value="",h(s)})})}E&&E.addEventListener("click",W),y&&y.addEventListener("click",v),console.log("[WhatsApp Or\xE7amentos] Iniciando extra\xE7\xE3o autom\xE1tica..."),v()});})();
//# sourceMappingURL=popup.bundle.js.map
